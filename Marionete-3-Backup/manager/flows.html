<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerenciador de Fluxos - Marionete</title>
  <link rel="stylesheet" href="flows.css">
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>üé≠ Marionete</h1>
        <p>Gerenciador de Fluxos</p>
      </div>

      <div class="sidebar-section">
        <h3>Meus Fluxos</h3>
        <div id="flowList" class="flow-list-sidebar"></div>
      </div>

      <div class="sidebar-footer">
        <button id="btnImport" class="btn-sidebar-secondary" title="Importar fluxo">
          üì• Importar
        </button>
        <button id="btnNewFlow" class="btn-sidebar">
          ‚ûï Novo Fluxo
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Toolbar -->
      <div class="toolbar">
        <div class="toolbar-left">
          <h2 id="flowTitle">Selecione um fluxo</h2>
        </div>
        <div class="toolbar-right">
          <button id="btnExport" class="btn btn-secondary" disabled>
            üì§ Exportar
          </button>
          <button id="btnDelete" class="btn btn-danger" disabled>
            üóëÔ∏è Apagar
          </button>
          <button id="btnExecute" class="btn btn-primary" disabled>
            ‚ñ∂Ô∏è Executar
          </button>
        </div>
      </div>

      <!-- Speed Selector -->
      <div id="speedSelector" class="speed-selector hidden">
        <label>Velocidade de reprodu√ß√£o:</label>
        <div class="speed-options">
          <button class="speed-btn" data-speed="0.5">0.5√ó</button>
          <button class="speed-btn active" data-speed="1">1√ó</button>
          <button class="speed-btn" data-speed="2">2√ó</button>
          <button class="speed-btn" data-speed="4">4√ó</button>
        </div>
      </div>

      <!-- Flow Details -->
      <div id="flowDetails" class="flow-details hidden">
        <div class="detail-card">
          <h3>Informa√ß√µes</h3>
          <div class="detail-grid">
            <div class="detail-item">
              <span class="detail-label">URL Inicial:</span>
              <span id="detailUrl" class="detail-value"></span>
            </div>
            <div class="detail-item">
              <span class="detail-label">A√ß√µes:</span>
              <span id="detailActions" class="detail-value"></span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Dura√ß√£o:</span>
              <span id="detailDuration" class="detail-value"></span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Vari√°veis:</span>
              <span id="detailVariables" class="detail-value">0</span>
            </div>
          </div>
        </div>

        <!-- Variables Section -->
        <div id="variablesSection" class="detail-card hidden">
          <div class="section-header">
            <h3>üî§ Vari√°veis do Fluxo</h3>
            <span class="help-text">Clique no √≠cone üî§ ao lado de um valor para converter em vari√°vel</span>
          </div>
          <div id="variablesList" class="variables-list"></div>
        </div>

        <!-- Action Steps -->
        <div class="steps-container">
          <div class="steps-header">
            <h3>Passos do Fluxo</h3>
            <span id="stepCount" class="step-count"></span>
          </div>
          <div id="stepsList" class="steps-list"></div>
        </div>
      </div>

      <!-- Empty State -->
      <div id="emptyState" class="empty-state-main">
        <div class="empty-icon">üìã</div>
        <h2>Nenhum fluxo selecionado</h2>
        <p>Selecione um fluxo na barra lateral ou crie um novo</p>
      </div>
    </main>
  </div>

  <!-- Variable Input Modal -->
  <div id="variableModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>üî§ Configurar Vari√°vel</h3>
        <button class="modal-close" id="closeVariableModal">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Nome da Vari√°vel:</label>
          <input type="text" id="variableName" placeholder="ex: email, nome, senha" />
          <small>Use nomes descritivos sem espa√ßos</small>
        </div>
        <div class="form-group">
          <label>Valor Atual:</label>
          <input type="text" id="variableValue" readonly />
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="variableSensitive" />
            Informa√ß√£o sens√≠vel (ocultar durante execu√ß√£o)
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelVariable">Cancelar</button>
        <button class="btn btn-primary" id="saveVariable">Salvar Vari√°vel</button>
      </div>
    </div>
  </div>

  <!-- Execution Variables Modal -->
  <div id="executionModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>‚ñ∂Ô∏è Valores das Vari√°veis</h3>
      </div>
      <div class="modal-body">
        <p class="modal-description">Preencha os valores para executar o fluxo:</p>
        <div id="executionVariableInputs"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelExecution">Cancelar</button>
        <button class="btn btn-primary" id="startExecution">‚ñ∂Ô∏è Executar</button>
      </div>
    </div>
  </div>

  <!-- Hidden file input for import -->
  <input type="file" id="fileInput" accept=".json" style="display: none;" />

  <!-- Sortable.js for drag-and-drop -->
  <script src="Sortable.min.js"></script>
  <script src="flows.js"></script>
</body>
</html>